@page "/"
@using Caliqon.Property.WebApp.BusinessLogic.Services

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.


<AuthorizeView>
    <Authorized>
        <MudButton OnClick="GetToken">Get Token</MudButton>

        <MudText>@Token</MudText>
    </Authorized>
    <Authorizing>
        Authorizing...
    </Authorizing>
    <NotAuthorized>
        Not Authorized
    </NotAuthorized>
</AuthorizeView>


@code {

    [Inject]
    private ITokenService TokenService { get; set; }

    private string Token { get; set; }

    private async Task GetToken()
    {
        Token = await TokenService.GetTokenAsync();
        Console.WriteLine(Token);
        StateHasChanged();
    }

}